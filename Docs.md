## Architecture
### Loading a game
 SGE dynamically loads one selected game (in code named mod) from the "mods" folder.
 Mods must met some requirements, eg. contains all the config files. (See *TODO*)
 Once the mod is loaded, SGE loads scene gived in mod/manifest.json in "start_scene" field. 
### Entities, components and assets
 In SGE, game objects are called **entities**. Entities are composites made of **components**.
 Components allows entity to interact with engine subsystems like the renderer or audio system.
 They can be also dynamically added and removed from the entities at runtime. 

 Often components needs additional data to work, eg. sprite needs an image.
 This data is stored inside **assets**. Assets are automatically loaded when needed, and unloaded when not.

## Components in detail
 Each components has its own unique name (a 32 bit usingned integer), that differentiate it from other components inside the entity.
 Engine lua api allows passing strings as the components names - passed strings will be auto hashed into integers.

 There are 10 types of components:
 -*behavior* : links *behavior asset* to the entity therefore adding logic to the owner  
 -*camera* : allows renderer to render game objects to the screen  
 -*collider* : adds collision to the entity  
 -*dynamics* : handles forces, gravitation etc.  
 -*static mesh* : remders given *mesh asset* with given *shader asset* and given set of *texture assets*  
 -*sprite* : renders sprite + adds collision  
 -*flipbook* : renders flipbook (animations made of sprites) + adds collision  
 -*tilemap* : renders *tilemap asset* using textures from *tileset asset* + adds collision   
 -*sound emitter* : emitts *sound asset* in owner's position  
 -*listener* : represents sound listener in world space  

 ## Assets in detail
  Each asset is represented by .json file, consisting of "asset_type" field, with string determining asset type, and additional asset-type-dependant data.  
  Example sprite_sheet asset:  
  ```  
  {
      "asset_type" : "sprite_sheet",
      "path" : "$/player_sprite_sheet.png",
  
      "sprite_width" : 16,
      "sprite_height" : 16
  }
```
  There are 14 types of assets:  
-*behavior* : represents lua script. (See *TODO*) Example:  
 ```
{
    "asset_type" : "behavior",
    "path" : "$/controller.lua"
}
```
-*texture* : represents texture. (See *TODO*) Example:
```
{
    "asset_type" : "texture",
    "path" : "$/apple_texture.png",
}
```
-*sprite_sheet* : represents sprite sheet. (See *TODO*) Example:
```
{
    "asset_type" : "flipbook",
    "path" : "$/player_sprite_sheet.png",

    "sprite_width" : 16,
    "sprite_height" : 16
}
```
-*flipbook* : represents sprite sheet, and provide information about animations. (See *TODO*) Example:
```
{
    "asset_type" : "flipbook",
    "path" : "$/player_sprite_sheet.png",

    "sprite_width" : 16,
    "sprite_height" : 16,

    "animations" : {
        "idle" : {
            "fps" : 4,
            "frames" : [0, 1, 2, 3, 4, 5]
        }
    }
}
```
-*shader* : represents GLSL shader. (See *TODO*) Example:
```
{
    "asset_type" : "shader",
    "path" : "$/sprite_shader.glsl"
}
```
-*tileset* : represents tileset and provide infromation about which tiles (Numbering from top-left corner, starting at 1) should have collision. (See *TODO*) Example:
```
{
    "asset_type" : "tileset",
    "path" : "$/tileset.png",

    "tile_width" : 8,
    "tile_height" : 8,

    "collisions" : [
        1,  2,  3,  4,
        17, 19, 20,
        33, 34, 35, 36,
        49, 50, 51, 52,
    ]
}
```
-*tilemap* : represents tilemap generated by tiled program. (See *TODO*) Example:
```
{
    "asset_type" : "tilemap",
    "path" : "$/tilemap.tmj"
}
```
-*scene* : represents lua script that create, and manage an scene. (See *TODO*) Example:
```
{
    "asset_type" : "scene",
    "path" : "$/scene.lua"
}
```
-*sound* : represents mp3 sound. (See *TODO*) Example:
```
{
    "asset_type" : "sound",
    "path" : "$/orchestra.mp3"
}
```
-*mesh* : represents an mesh (geometry). (See *TODO*) Example: 
```
{
    "asset_type" : "mesh",
    "path" : "$/square_mesh.mesh"
}
```
-*rendering_config* : contains renderer configuration. (See *TODO*) Example:
```
{
    "asset_type" : "rendering_config",
    "default_sprite_shader_override" : "core/sprite_shader",
    "use_pixel_aligned_camera" : true,
    "background_color" : [
        0.09411764705, 
        0.07843137254, 
        0.14509803921
    ]
}
```
-*input_config* : contains input subsystem configuraion. (See *TODO*) Example:
```
{
    "asset_type" : "input_config",

    "action_mappings" : {
        "jump" : ["Space"],
        "attack" : ["Enter"]
    },

    "axis_mappings" : {
        "move_forward" : {
            "W" : 1,
            "S" : -1
        },
        "move_right" : {
            "D" : 1,
            "A" : -1
        }
    }
}
``` 
-*collision_config* : contains collision presets configuration (See *TODO*) Example:
  ```
{
    "asset_type" : "collision_config",
  
    "body_types" : {
        "wall" : 0,
        "player" : 1,
        "enemy" : 2
    },
  
    "collision_presets" : {
        "player" : {
            "body_type" : "player",
            "responses" : {
               "player" : "ignore",
               "enemy" : "overlap",
               "wall" : "collide"
            }
        }
    }
}
```


























